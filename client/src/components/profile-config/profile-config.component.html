<div *ngIf="getUser()" [ngClass]="getDevice()">

  <header>

    <div class="img-container">
      <div class="i-container">
        <a routerLink="upload-img"> <img [src]="getUser().image" alt=""> </a>

      </div>
    </div>

    <h4>{{getUser().name}} {{getUser().lastName}}</h4>

  </header>


  <main>


    <!----------------------------------Update User ----------------------------------->


    <section class="user-data">

      <h3 class="head-slide" (click)="toggleMenu('user-data')">{{language.getWord('userData')}} <i class="fa-solid fa-user-pen"></i></h3>

      <form [formGroup]="userForm" [ngClass]="{'menu-open': menuOpen === 'user-data'}">

        <div class="input-pair">
          <label for="email">{{language.getWord('email')}}</label>
          <input [value]="getUser().email" type="email" id="email" formControlName="email"
            placeholder="{{language.getWord('email')}}" class="input-style">
        </div>

        <div class="input-pair">
          <label for="name"> {{language.getWord('name')}} </label>
          <input [value]="getUser().name" type="text" id="name" formControlName="name"
            placeholder="{{language.getWord('name')}}"
            [ngClass]="{ 'text-style': !userForm.get('name')?.touched, 'input-style': userForm.get('name')?.touched }"
            [disabled]="!userForm.get('name')?.touched">
        </div>
        <div class="input-pair">
          <label for="last-name"> {{language.getWord('lastName')}}</label>
          <input [value]="getUser().lastName" type="text" id="last-name" formControlName="lastName"
            placeholder="{{language.getWord('lastName')}}"
            [ngClass]="{ 'text-style': !userForm.get('lastName')?.touched, 'input-style': userForm.get('lastName')?.touched }"
            [disabled]="!userForm.get('lastName')?.touched">
        </div>

        <div class="input-pair">
          <label for="city">{{language.getWord('city')}}</label>
          <select formControlName="country">
            <option value="" selected>{{language.getWord('select_city')}} </option>
            <option *ngFor="let city of cities" [value]="city.id">{{city.country}}</option>
          </select>
        </div>

        <div class="input-pair">
          <label for="address">{{language.getWord('address')}}</label>
          <input type="text" id="address" formControlName="address" placeholder="{{language.getWord('address')}}"
            [ngClass]="{ 'text-style': !userForm.get('address')?.touched, 'input-style': userForm.get('address')?.touched }"
            [disabled]="!userForm.get('address')?.touched">
        </div>
        <div class="input-pair">
          <label for="postalCode">{{language.getWord('postalCode')}}</label>
          <input type="text" id="postalCode" formControlName="postalCode"
            placeholder="{{language.getWord('postalCode')}}"
            [ngClass]="{ 'text-style': !userForm.get('postalCode')?.touched, 'input-style': userForm.get('postalCode')?.touched }"
            [disabled]="!userForm.get('postalCode')?.touched">
        </div>

        <div class="input-pair">
          <label for="birthday">{{language.getWord('birthDay')}}</label>
          <input formControlName="birthDay" placeholder="{{language.getWord('birthDay')}}" type="date" />
        </div>

        <input type="button" value="{{language.getWord('update_user')}}" class="submit-btn" (click)="updateUser()">
      </form>
    </section>




    <!--------------------------------Update Pet---------------------------------->

    <section class="user-data">

      <div class="section2-slide">
        <h3 class="head-slide" (click)="toggleMenu('pet-data')">{{language.getWord('pet_data')}} </h3>
      </div>

      <form [formGroup]="petForm" [ngClass]="{'menu-open': menuOpen === 'pet-data'}">

        <div class="section2-slide">
          <label for="name">Mascota</label>
          <select (change)="getEachPet(selectOption)" [(ngModel)]="selectOption" [ngModelOptions]="{standalone: true}">
            <option value="" selected>{{language.getWord('select')}}</option>
            <option *ngFor="let pet of getUser().pets" value="{{pet.id}}">{{pet.name | uppercase}}</option>
          </select>
        </div>

        <ng-container *ngIf="selectOption">

          <div class="input-pair">
            <label for="name">{{language.getWord('name')}}</label>
            <input type="text" id="name" formControlName="name" [placeholder]="selectedPet?.name"
              [ngClass]="{ 'text-style': !userForm.get('email')?.touched, 'input-style': userForm.get('email')?.touched }"
              [disabled]="!userForm.get('email')?.touched">
            <!-- <span class="material-symbols-rounded" style="color: white;"  (click)="editInput(getUser().name)">
          edit
        </span> -->
          </div>
          <div class="input-pair">
            <label for="date">{{language.getWord('birthDay')}}</label>
            <input class="input" formControlName="birthDay" placeholder="{{language.getWord('birthDay')}}"
              type="date" />
          </div>


          <div class="input-pair">
            <label> {{language.getWord('type')}}</label>
            <select (change)="downloadRaces($event)" formControlName="type">
              <option value="" selected>{{language.getWord('select')}}</option>
              <option *ngFor="let type of getTypes()" value="{{type.id}}">{{type.type}}</option>
            </select>
          </div>

          <div class="input-pair">
            <label for="race"> {{language.getWord('race')}}</label>
            <select formControlName="race">
              <option value="" selected>{{language.getWord('select')}}</option>
              <option *ngFor="let race of getRaces()" [value]="race.id">{{ race.race }}</option>
            </select>
          </div>

          <!-- <div class="input-pair">
        <label for="race"> {{language.getWord('race')}}</label>
        <input type="text" id="race" formControlName="name" [placeholder]="selectedPet?.race" [ngClass]="{ 'text-style': !userForm.get('email')?.touched, 'input-style': userForm.get('email')?.touched }" [disabled]="!userForm.get('email')?.touched">
       <span class="material-symbols-rounded" style="color: white;"  (click)="editInput(getUser().name)">
          edit
        </span>
      </div> -->

          <div class="input-pair">
            <label for="gender">{{language.getWord('gender')}}</label>
            <select formControlName="gender">
              <option value="" selected>{{language.getWord('select')}}</option>
              <option value="M">{{language.getWord('male')}}</option>
              <option value="F">{{language.getWord('female')}}</option>
            </select>
            <!-- <span class="material-symbols-rounded" style="color: white;"  (click)="editInput(getUser().name)">
          edit
        </span> -->
          </div>

          <div class="input-pair">
            <label>{{language.getWord('description')}}:</label>
            <input type="text" formControlName="description" [placeholder]="selectedPet?.description">
            <!-- <span class="material-symbols-rounded" style="color: white;"  (click)="editInput(getUser().name)">
          edit
        </span> -->
          </div>

          <input type="button" value="{{language.getWord('update_pet')}}"class="submit-btn" (click)="updatePet()">

        </ng-container>
      </form>

    </section>



    <!-----------------------------------Add PET----------------------------------->

    <section class="user-data">

      <h3 (click)="toggleMenu('add-pet')"> {{language.getWord('add_pet')}} <i class="fa-solid fa-user-pen"></i></h3>

      <form [formGroup]="petForm" [ngClass]="{'menu-open': menuOpen === 'add-pet'}">

        <div class="input-pair">
          <label for="name"> {{language.getWord('name')}}:</label>
          <input type="text" id="name" formControlName="name" placeholder="{{language.getWord('name')}}"
            [ngClass]="{ 'text-style': !userForm.get('email')?.touched, 'input-style': userForm.get('email')?.touched }"
            [disabled]="!userForm.get('email')?.touched">
          <!-- <span class="material-symbols-rounded" style="color: white;"  (click)="editInput(getUser().name)">
            edit
          </span> -->
        </div>
        <div class="input-pair">
          <label for="date">{{language.getWord('birthDay')}}</label>
          <input class="input" formControlName="birthDay" placeholder="{{language.getWord('birthDay')}}" type="date" />
        </div>

        <div class="input-pair">
          <label> {{language.getWord('type')}}</label>
          <select (change)="downloadRaces($event)" formControlName="type">
            <option value="" selected>{{language.getWord('select')}}</option>
            <option *ngFor="let type of getTypes()" value="{{type.id}}">{{type.type}}</option>
          </select>
          <!-- <span class="material-symbols-rounded" style="color: white;"  (click)="editInput(getUser().name)">
            edit
          </span> -->
        </div>

        <div class="input-pair">
          <label for="race"> {{language.getWord('race')}}</label>
          <select formControlName="race">
            <option value="" selected>{{language.getWord('select')}}</option>
            <option *ngFor="let race of getRaces()" [value]="race.id">{{ race.race }}</option>
          </select>
          <!-- <span class="material-symbols-rounded" style="color: white;"  (click)="editInput(getUser().name)">
            edit
          </span> -->
        </div>

        <div class="input-pair">
          <label for="birthday">{{language.getWord('gender')}}</label>
          <select name="cars" id="cars" formControlName="gender">
            <option value="" selected>{{language.getWord('select')}}</option>
            <option value="M">{{language.getWord('male')}}</option>
            <option value="F">{{language.getWord('female')}}</option>
          </select>
          <!-- <span class="material-symbols-rounded" style="color: white;"  (click)="editInput(getUser().name)">
            edit
          </span> -->
        </div>
        <div class="input-pair">
          <label for="description"> {{language.getWord('description')}}</label>
          <input type="text" id="description" formControlName="description"
            placeholder="{{language.getWord('description')}}"
            [ngClass]="{ 'text-style': !userForm.get('email')?.touched, 'input-style': userForm.get('email')?.touched }"
            [disabled]="!userForm.get('email')?.touched">
          <!-- <span class="material-symbols-rounded" style="color: white;"  (click)="editInput(getUser().name)">
            edit
          </span> -->
        </div>
        <div>
          <img (click)="image.click()" [ngStyle]="{img: formImagePet.value.fileSource}"
            [ngClass]="imageSrc=='assets/images/profile.png'? 'img':'img2'" width="250" height="250" [src]="imageSrc" />
          <input #image id="image_pet_file" hidden type="file" accept="image/png,image/jpeg"
            (change)="onFileChange($event) ">
        </div>

        <input type="button" value="{{language.getWord('add_pet')}}" class="submit-btn" (click)="addPet()">
      </form>
    </section>



    <!--------------------------------Delete Pet----------------------------------->

    <section class="user-data">
      <h3 class="delete-pet-slide" (click)="toggleMenu('delete-pet')">{{language.getWord('delete_pet')}}<i class="fa-solid fa-user-pen"></i>
      </h3>
      <form [ngClass]="{'menu-open': menuOpen === 'delete-pet'}">
        <h3 style="color: #FBB033; padding:5px">{{language.getWord('choose_delete')}}</h3>
        <ol *ngFor="let pet of getUser().pets, index as i" style="color: white; margin-bottom: 25px">
          <a class="delete-button" (click)="pet_delete_routing($event)" [id]="pet.id"
            style="color:white; font-size: 22px; text-decoration:none">{{pet.name | titlecase}}</a>
        </ol>

      </form>
    </section>

    <section class="user-data">

      <h3 class="head-slide" (click)="logout()">{{language.getWord('log_out')}} <i class="fa-solid fa-user-pen"></i></h3>
    </section>
  </main>
</div>
<router-outlet />
